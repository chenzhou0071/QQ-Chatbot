# QQ Bot Web 管理界面

## 功能特性

### ✅ 已实现功能

1. **仪表盘**
   - Bot运行状态监控（运行/停止）
   - 实时系统资源监控（内存、CPU）
   - 今日统计数据（消息数、回复数、触发率）
   - 最近活动日志预览

2. **配置管理**
   - 基础配置（QQ号、管理员、目标群）
   - AI配置（API Key、温度参数）
   - 触发配置（开关、概率调整）
   - 人设配置（名字、昵称）
   - 一键保存/重新加载

3. **实时日志**
   - WebSocket实时推送
   - 自动滚动开关
   - 日志清空功能
   - 最近1000条日志缓存

4. **群友管理**
   - 群友列表展示
   - 显示QQ号、昵称、生日、备注
   - 消息数统计

5. **Bot控制**
   - 启动/停止/重启Bot
   - 进程状态监控
   - 运行时间统计

### 🚧 待开发功能

- 数据可视化图表
- 配置导入/导出
- 群友信息编辑
- 更详细的统计分析
- 主题切换（暗色模式）

## 使用方法

### 1. 启动Web管理界面

```bash
# Windows
start_web.bat

# 或手动启动
python web/app.py
```

### 2. 访问界面

打开浏览器访问：`http://localhost:5000`

### 3. 功能说明

#### 仪表盘
- 查看Bot运行状态
- 控制Bot启动/停止/重启
- 查看今日统计数据
- 查看最近活动日志

#### 配置页面
- 修改Bot配置（QQ号、群号等）
- 修改AI配置（API Key、参数）
- 调整触发器配置
- 修改人设配置
- 点击"保存配置"按钮保存更改

#### 日志页面
- 实时查看Bot运行日志
- 自动滚动到最新日志
- 清空日志缓存

#### 群友管理
- 查看所有群友信息
- 查看消息数统计

## 技术架构

### 后端
- **Flask**: Web框架
- **Flask-SocketIO**: WebSocket实时通信
- **psutil**: 系统资源监控
- **subprocess**: Bot进程管理

### 前端
- **Vue 3**: 前端框架
- **Socket.IO**: WebSocket客户端
- **原生CSS**: 样式设计

## API接口

### Bot控制
- `POST /api/bot/start` - 启动Bot
- `POST /api/bot/stop` - 停止Bot
- `POST /api/bot/restart` - 重启Bot
- `GET /api/bot/status` - 获取Bot状态

### 配置管理
- `GET /api/config` - 获取配置
- `POST /api/config` - 保存配置

### 数据查询
- `GET /api/stats/today` - 今日统计
- `GET /api/logs/recent` - 最近日志
- `GET /api/members` - 群友列表

### WebSocket事件
- `connect` - 连接建立
- `log` - 实时日志推送
- `initial_logs` - 初始日志数据

## 注意事项

1. **端口占用**: 默认使用5000端口，如果被占用请修改`web/app.py`中的端口号
2. **权限问题**: 需要有读写配置文件的权限
3. **Bot进程**: Web界面启动的Bot进程会在Web服务器关闭时自动停止
4. **数据库**: 需要确保`data/bot.db`存在且可访问

## 开发计划

- [ ] 添加数据可视化图表（Chart.js）
- [ ] 实现配置验证功能
- [ ] 添加群友信息编辑功能
- [ ] 实现主题切换
- [ ] 添加更多统计维度
- [ ] 支持多群管理
- [ ] 添加用户认证

## 故障排除

### Web界面无法访问
- 检查5000端口是否被占用
- 检查防火墙设置
- 查看控制台错误信息

### Bot无法启动
- 检查配置文件是否正确
- 检查虚拟环境是否激活
- 查看日志中的错误信息

### 实时日志不更新
- 检查WebSocket连接状态
- 刷新页面重新连接
- 检查浏览器控制台错误

## 更新日志

### v1.0.0 (2026-02-18)
- ✅ 初始版本发布
- ✅ 实现基础功能
- ✅ 仪表盘、配置、日志、群友管理页面
- ✅ WebSocket实时日志推送
- ✅ Bot进程控制
